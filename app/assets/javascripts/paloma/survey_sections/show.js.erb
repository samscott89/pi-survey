var SurveySectionsController = Paloma.controller('SurveySections');

SurveySectionsController.prototype.show = function(){
    // This code here handles setting has_other=1 when a radio button is set to "other"
    $('[id$=option_id_0]:radio').each(function(){
        this_id = $(this).prop('id');
        idx = this_id.indexOf('answer_options_attributes')
        var ans_id = this_id.substr(0, idx);
        if($('#' + ans_id + 'has_other').val() == 't') {
            $(this).prop('checked', true)
        }
        $("input[id^=" + ans_id + "]:radio").change(function(){
            if($(this).prop('id').indexOf('option_id_0') > 0){
                $('#' + ans_id + 'has_other').val('t');
            } else{
                $('#' + ans_id + 'has_other').val('f');
            }
        });

    })
};